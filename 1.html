<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Pics Extractor</title>
  <a href="index.html">Discount & Sale Price </a>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
</head>
<body style="direction: rtl; font-family: Arial; padding: 20px">

  <h2>Pics Links</h2>
  <textarea id="links" rows="10" cols="50" placeholder="https://example.com/image1.jpg"></textarea><br><br>

  <label for="startNum">Start From ğŸ™ƒ</label>
  <input type="number" id="startNum" value="1" style="width:80px; margin-right:10px;"><br><br>

  <button onclick="downloadAndZip()">Download</button>

  <p id="status" style="color: green; margin-top: 10px;"></p>

  <script>
    async function downloadAndZip() {
      const textarea = document.getElementById('links');
      const status = document.getElementById('status');
      const startNumInput = document.getElementById('startNum');
      const urls = textarea.value.trim().split('\n').filter(Boolean);
      let startNum = parseInt(startNumInput.value) || 1;

      if (urls.length === 0) {
        status.textContent = 'Ø£Ø¶Ù Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø£ÙˆÙ„Ø§Ù‹';
        return;
      }

      status.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...';

      const zip = new JSZip();

      for (let i = 0; i < urls.length; i++) {
        const url = urls[i];
        try {
          const response = await fetch(url);
          const blob = await response.blob();
          const ext = url.split('.').pop().split('?')[0]; // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø§Ù…ØªØ¯Ø§Ø¯
          zip.file(`${startNum}.${ext}`, blob);
          startNum++;

          status.textContent = `ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ ${i + 1} Ù…Ù† ${urls.length}... âŒ›`;

        } catch (error) {
          console.error(`ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${url}`, error);
          status.textContent = `Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ${i + 1}/${urls.length}`;
        }
      }

      status.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¶ØºÙˆØ·...';

      const zipFile = await zip.generateAsync({ type: "blob" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(zipFile);
      link.download = "images.zip";
      link.click();

      status.textContent = 'ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…';
    }
  </script>
</body>
</html>


